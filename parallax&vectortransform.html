<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Parallax  Demo for oupeng</title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
	<ul id="nav">
		<li><a href="#intro" title="Next Section"><img
				src="images/dot.png" alt="Link" /></a></li>
		<li><a href="#second" title="Next Section"><img
				src="images/dot.png" alt="Link" /></a></li>
		<li><a href="#third" title="Next Section"><img
				src="images/dot.png" alt="Link" /></a></li>
		<li><a href="#fifth" title="Next Section"><img
				src="images/dot.png" alt="Link" /></a></li>
	</ul>
	<div id ="rockUp"></div>
	<div id ="rockDown"></div>
	<div id = "rockBody"></div>
    	<div id="testsvg" style="width:100%;height:800px;position:fixed;overflow:hidden;display:none"></div>

	<div id="intro">
		<div class="story" >
			<div class="float-center">
				<h2>全球最古老的手机浏览</h2>
				<p>全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览?
				全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览?
				全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览器全球最古老的手机浏览?
				</p>
			</div>
		</div>
		<!--.story-->
	</div>
	<!--#intro-->

	<div id="second">
		<div class="story" id="secStory">
			<div class="bg"></div>
			<div class="narrow">
				<h2>有哪些特性？</h2>
				<p>收索历史收索历史收索历史收索历史收索历史收索历史收索历史收索历史收索历史收索历史收索历史收索历史</p>
				<p>微博微微博微博微博微博微博微博微博微博微博微博微博微博微博微博微博微博微?</p>
				<p>多设备多设备多设备多设备多设?</p>
			</div>
		</div>

	</div>

	<div id="third">
		<div class="story">
			<div class="float-right">
				<h2>最牛逼的手机浏览器？</h2>
				<p>优势？优势？优势？优势？优势？优势？优势？优势？优势？优势？为什么？为什么？为什么？为什么？为什么？为什么？为什么？</p>
			</div>
		</div>
	</div>

	<div id="fifth">
		<div class="story">			
			<h2>欧朋诞生了！</h2>
			<p>
				欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！欧朋诞生了！
			</p>
		</div>
	</div> 
	<!--#fifth-->
<script type="text/javascript" src="scripts/jquery-1.6.1.min.js"></script>
<script type="text/javascript" src="scripts/jquery.parallax-1.1.3.js"></script>
<script type="text/javascript" src="scripts/jquery.localscroll-1.2.7-min.js"></script>
<script type="text/javascript" src="scripts/jquery.scrollTo-1.4.2-min.js"></script>
<script type="text/javascript" src="scripts/raphael.js"></script>
	<script>
(function($){
	

		var logoSvg=[{"path":"M233.98,703.202c79.862,0,144.607,90.896,144.607,203.021 s-64.745,203.021-144.607,203.021c-79.861,0-144.604-90.896-144.604-203.021S154.119,703.202,233.98,703.202z","stroke":"none","fill":"#FFFFFF","type":"path","opacity":0.01},{"path":"M78.062,1112.834c0-14.759,68.993-28.993,155.565-28.993c86.568,0,157.666,14.234,157.666,28.993 c0,13.539-63.469,24.946-157.666,24.946c-94.206,0-155.571-12.416-155.571-24.95L78.062,1112.834z","stroke":"none","fill":"270-acity:0:0-#000000:100","type":"path"},{"path":"M118.789,1112.834c0-14.759,51.055-28.993,115.11-28.993c64.054,0,116.651,14.234,116.651,28.993 c0,13.539-46.949,24.946-116.651,24.946c-69.713,0-115.116-12.416-115.116-24.95L118.789,1112.834z","stroke":"none","fill":"270-acity:0:0-#000000:100","type":"path"},{"path":"M233.165,1089.583c74.361,0,81.06-112.637,81.06-188.43c0-87.237-13.051-182.403-81.06-182.403 c-67.998,0-79.388,101.181-79.388,182.403c-0.009,75.098,6.086,188.438,79.388,188.438V1089.583z M233.145,682.14 c121.749,0,212.86,88.045,212.86,222.775c0,118.963-86.312,226.952-212.84,226.952c-125.302,0-211.16-108.014-211.16-226.952 C22.003,771.254,110.294,682.14,233.145,682.14z","stroke":"none","fill":"279.9999998815531-#FF8C8F:0-#F21818:38.04-#E51515:44.61-#C20E0E:56.830000000000005-#8A0202:73.24000000000001-#800000:76.07000000000001","type":"path"},{"path":"M358.899,1083.142 c-31.669,27.956-73.469,43.833-125.736,43.833c-51.804,0-93.393-15.877-124.976-43.833l107.161-0.257 c5.49,1.518,11.417,2.314,17.814,2.314c6.491,0,12.493-0.528,18.049-2.046h107.68L358.899,1083.142z","stroke":"none","fill":"270-acity:0:0-:0.2367:23.669999999999998-:0.6708:67.08-#FF0000:100","type":"path","opacity":0.5},{"path":"M233.127,1084.081 c-75.806,0-78.961-107.68-78.961-183.164c0-88.549,8.572-173.592,78.961-173.592c70.394,0,81.105,86.113,81.105,173.505 c-0.024,75.624-4.237,183.247-81.112,183.247L233.127,1084.081z M233.145,716.125c-82.802,0-91.08,110.573-91.08,184.741 c0,83.97,16.514,193.028,91.08,193.028c79.425,0,93.338-109.213,93.338-193.028c0-72.988-8.825-184.745-93.333-184.745 L233.145,716.125z","stroke":"none","fill":"89.29949822727626-#E60000:0-#DC0B0A:35.68-#C02825:98.11-#BF2926:100","type":"path","opacity":0.8},{"path":"M233.165,1081.385c-73.255,0-76.173-105.943-76.173-180.197c0-87.123,8.154-170.649,76.173-170.649 c68.025,0,78.294,84.586,78.294,170.562c-0.021,74.373-4.002,180.275-78.3,180.275L233.165,1081.385z M233.184,719.15 c-81.525,0-87.318,109.626-87.318,181.984c0,82.611,13.758,189.904,87.318,189.904c76.746,0,90.078-107.447,90.078-189.904 c0-71.197-8.415-181.986-90.072-181.986L233.184,719.15z","stroke":"none","fill":"90-#B80000:0-#990000:100","type":"path"},{"path":"M153.527,899.216c0-77.978,10.441-168.661,79.626-168.661c69.188,0,81.86,94.706,81.86,167.433 c0-65.693-8.906-170.33-81.757-170.33c-72.694-0.011-79.718,104.721-79.718,171.561L153.527,899.216z","stroke":"none","fill":"90-acity:0:0-:0.1308:13.08-:0.5151:51.51-:0.8181:81.81-#730000:100","type":"path"},{"path":"M312.09,913.152c0,77.975-11.465,168.622-78.394,168.622c-66.938,0-77.63-89.728-77.63-167.394 c0,70.643,7.053,170.29,77.526,170.29c70.351,0.024,78.493-104.69,78.493-171.511L312.09,913.152z","stroke":"none","fill":"90-#730000:0-:0.8181:18.19-:0.5151:48.49-:0.1308:86.92-acity:0:100","type":"path"},{"path":"M27.741,903.528c0,115.075,78.423,224.63,205.89,224.63 c128.393,0,208.075-112.674,208.075-224.63c0,110.943-81.541,222.836-208.075,222.836 C108.045,1126.344,27.741,1017.534,27.741,903.528z","stroke":"none","fill":"0-#E8000F:0-#E0000F:100","type":"path","opacity":0.8},{"path":"M28.5,898.296c0-94.73,64.989-211.452,204.659-211.452 c116.334,0,207.335,90.234,207.335,211.452c0-122.42-83.144-215.845-207.335-215.845C108,682.437,28.5,773.322,28.5,898.296 L28.5,898.296z","stroke":"none","fill":"90-acity:0:0-#FFFFFF:100","type":"path","opacity":0.65}];
		var fontPath=[{"stroke":"none","fill":"#D11B25","type":"path","path":"M40.824,100.332C7.473,100.332,0,77.52,0,49.117C0,23.492,7.602,0,40.824,0 c33.219,0,41.215,23.492,41.215,49.117C82.039,77.52,74.043,100.332,40.824,100.332 M40.824,15.348 c-17.613,0-22.684,11.074-22.684,33.77c0,25.348,5.207,36.023,22.684,36.023c17.613,0,23.074-10.82,23.074-36.023 C63.898,26.422,58.566,15.348,40.824,15.348"},{"stroke":"none","fill":"#D11B25","type":"path","path":"M123.863,64.863h-15.625c0.277,0.918,0.93,2.516,0.93,3.453v30.02H91.305V2.156h32.559 c24.543,0,35.738,13.07,35.738,30.555C159.602,50.055,148.672,64.863,123.863,64.863 M123.863,17.344h-14.695v32.289h14.695 c11.996,0,17.598-5.984,17.598-16.922C141.461,22.414,135.582,17.344,123.863,17.344"},{"stroke":"none","fill":"#D11B25","type":"path","path":"M167.188,98.336V2.156h64.023v14.945h-46.156v23.055h42.16l-4.414,14.945h-38.277 c0.418,0.938,0.531,2,0.531,2.539v25.742h46.293v14.953H167.188z"},{"stroke":"none","fill":"#D11B25","type":"path","path":"M293.711,98.422l-22.125-33.891c-0.688-0.938-0.945-2.117-1.227-3.191h-11.195v37.082h-17.867V2.242h32.68 c24.414,0,35.602,11.992,35.602,29.734c0,13.094-6.387,22.695-19.988,26.965l25.605,39.48H293.711z M273.977,17.188h-14.812 v29.219h14.812c12.535,0,17.457-5.625,17.457-14.43C291.434,22.379,286.121,17.188,273.977,17.188"},{"stroke":"none","fill":"#D11B25","type":"path","path":"M386.684,98.422l-8.293-24.414h-33.734l-8.406,24.414h-18.555l34.828-96.18h18.266l34.688,96.18H386.684z M363.453,30.402c-0.93-2.555-1.73-5.871-1.988-7.621c-0.27,1.852-1.074,5.203-1.867,7.621l-9.887,28.66h23.492L363.453,30.402z"},{"stroke":"none","fill":"#262626","type":"path","path":"M494.531,62.156l-0.363-0.246c-0.074-0.066-7.707-5.449-11.391-10.59 c7.812-9.633,13.395-21.543,15.277-26.543l0.254-0.66H483.75l-0.125,0.312c-1.238,3.016-4.578,9.531-8.328,14.965 c-2.719-5.543-4.723-11.527-5.469-14.895l-0.098-0.383h-14.473l0.121,0.586c0.332,1.461,3.312,14.379,10.715,26.547 c-4.211,4.945-10.492,10.523-10.559,10.594l-0.156,0.133v16.34l0.77-0.57c0.102-0.09,11.105-8.246,17.551-15.715 c3.711,4.777,12.23,10.75,12.605,11.008l0.355,0.242l0.285-0.328c2.578-2.898,5.051-6.406,7.371-10.418L494.531,62.156z"},{"stroke":"none","fill":"#262626","type":"path","path":"M530.902,1.562h-31.215v13.852h27.32c2.906,0,2.906,0.715,2.906,2.59l0.016,32.328l14.16,4.199v-41.25 c0-4.148-1.004-7.062-3.07-8.891C538.637,2.277,536.086,1.562,530.902,1.562z"},{"stroke":"none","fill":"#262626","type":"path","path":"M450.02,84.566c-2.926,0-2.926-0.715-2.926-2.59V18.336c0-2.922,0.703-2.922,2.582-2.922h40.848V1.562 h-45.891c-4.145,0-7.055,1.027-8.867,3.094c-2.117,2.375-2.832,4.93-2.832,10.102v71.98c0,4.152,1.004,7.066,3.066,8.906 c2.383,2.102,4.938,2.812,10.117,2.812h34.605V84.551h-28.84L450.02,84.566z"},{"stroke":"none","fill":"#262626","type":"path","path":"M603.715,1.562h-32.66c-5.168,0-8.023,2.746-8.023,7.727v70.887c0,4.934-3.16,6.996-3.281,7.066 l-0.234,0.156v13.75l0.625-0.156c0.164-0.055,16.895-4.863,16.895-17.766V70.504h20.496v9.672c0,4.934-3.156,6.996-3.297,7.066 l-0.227,0.156v13.75l0.609-0.156c0.172-0.055,16.91-4.863,16.91-17.766V9.289C611.527,4.898,608.18,1.562,603.715,1.562z M577.035,30.293V16.441c0-0.68,0.293-1.027,0.902-1.027h18.367c0.812,0,1.055,0.266,1.055,1.148v13.73H577.035z M597.531,43.473 v13.75h-20.496v-13.75H597.531z"},{"stroke":"none","fill":"#262626","type":"path","path":"M663.457,1.562h-32.656c-5.156,0-8.004,2.746-8.004,7.727v70.887c0,4.934-3.18,6.996-3.32,7.066 l-0.227,0.156v13.75l0.613-0.156c0.168-0.055,16.922-4.863,16.922-17.766V70.504h20.488v9.672c0,4.934-3.156,6.996-3.301,7.066 l-0.223,0.156v13.75l0.609-0.156c0.172-0.055,16.922-4.863,16.922-17.766V9.289C671.281,4.898,667.918,1.562,663.457,1.562z M636.785,30.293V16.441c0-0.68,0.301-1.027,0.902-1.027h18.336c0.852,0,1.074,0.266,1.074,1.148v13.73H636.785z M657.273,43.473 v13.75h-20.488v-13.75H657.273z"},{"stroke":"none","fill":"#262626","type":"path","path":"M521.762,44.43V24.117h-14.668V44.43c0,14.602-4.992,24.93-9.176,31.023 c-4.539,6.633-9.125,9.828-9.176,9.859l-0.219,0.141v15.887l0.723-0.402c0.184-0.082,17.949-9.875,25.184-26.422 c7.273,16.547,26.336,26.34,26.516,26.441l0.723,0.348V85.453l-0.234-0.156C541.242,85.176,521.762,72.379,521.762,44.43z"}];
		
		var oParallax = {
		    "svgEle":null,
		    "vecPic":null,
		    "logoSvg":null,
		    "fontPath":null
		},oPeng = {};
		
		
		oPeng.main = function(){
			oParallax.inite( $("#testsvg"), logoSvg, fontPath);
			oParallax.bindAction();
		    $('#nav').localScroll(800);
		}
		
		oParallax.inite = function(canvasEle,vecLogo,vecFont){    
		    this.svgEle = canvasEle;
		    this.logoSvg = vecLogo;
		    this.fontPath = vecFont;
		}
		
		oParallax.drawLogo = function(){
		    this.vecPic = Raphael([this.svgEle[0], "100%", 800].concat(logoSvg));
		    this.vecPic.translate(0, -660);   
		}
		
		
		oParallax.bindAction = function(){
		        
		    
		    $('#intro').parallax();
		    $('#secStory').parallax({"xpos":"30%"});
		    $('#second').parallax({"xpos":"100%","speedFactor":0.3});
		    $('.bg').parallax({"xpos":"35%","speedFactor":0.5});
		    $('#third').parallax({"xpos":"50%","speedFactor":0.3});
		    $('#fifth').parallax({"xpos":"50%","speedFactor":0.5});
		    $('#rockUp').parallax({"xpos":"20px","speedFactor":-0.1});
		    $('#rockDown').parallax({"xpos":"20px","speedFactor":-0.1});
		    $('#rockBody').parallax({"xpos":"164px","speedFactor":0.5});
		    
		    this.svgEle.parallax({"callBack":function(arg) {
		
		        var pos = arg.$window.scrollTop(),
		        dHeight = arg.$document.height(),windowHeight = arg.windowHeight,$this = arg.$this;
		        
		        if (pos >= dHeight - windowHeight - 400 ) {
		            if(oParallax.vecPic == null ){
		                oParallax.drawLogo();
		                $('#rockUp').hide();
		                $('#rockDown').hide();
		                $this.css("paddingTop", ( 0.1 * pos ) + "px").show();
		                 if (!oParallax.transformStart.start) {
		                    oParallax.transformStart(3000);
		                 }
		            }
		            
		        } else {
		            if ($this.css("display") == "block") {
		                $this.hide();
		                $('#rockUp').show();
		                $('#rockDown').show();
		                $this.html("").css("paddingTop",0);
		                oParallax.vecPic = null;
		                oParallax.transformStart.start = false;
		            }
		        }
		    }});
		
		
		}
		
		oParallax.transformStart = function(m) {
		        var ri = 0,r = this.vecPic,fontPath = this.fontPath,
		        eleBlack = r[1],r1 = r[2],eleRed = r[3];
		    
		        arguments.callee.start = true;
		
		        for (var i = r.length - 1; i >= 0; i--) {
		            if (r[i] != eleRed && r[i] != eleBlack) {
		                r[i].remove();
		            }
		        }
		
		        for (var j = 5,len = fontPath.length; j < len; j++) {
		            fontPath[j]["transform"] = "t400,200"
		            
		            if (j != len - 1) {
		                eleBlack.clone().animate(fontPath[j], m);
		            } else {
		                eleBlack.animate(fontPath[j], m);
		            }
		        }
		
		        eleRed.attr({
		            "fill": "#D11B25"
		        });
		        
		        for (j = 0,len = 5; j < len; j++) {
		            fontPath[j]["transform"] = "t400,200"
		            
		            if (j != len - 1) {
		                eleRed.clone().animate((fontPath[j]), m);
		            } else {
		                eleRed.animate((fontPath[j]), m);
		            }
		
		        }
		        setTimeout("oParallax.transformStart.start = false",m + 1);
		
		    }
			$(document).ready(function(){			
		        
		            oPeng.main();	
		
		        });
	
})($);

    </script>
</body>
</html>
